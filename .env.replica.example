# Database Read Replica Configuration
# This file contains all the environment variables needed for the read replica system

# Primary Database Configuration
DB_PRIMARY_HOST=localhost
DB_PRIMARY_PORT=5432
DB_NAME=nw_london_local
DB_USER=postgres
DB_PASSWORD=your_password_here
DB_PRIMARY_MAX_CONNECTIONS=100
DB_PRIMARY_MIN_CONNECTIONS=10
DB_SSL=false

# Replica 1 Configuration (Same Region - Low Latency)
DB_REPLICA1_HOST=localhost
DB_REPLICA1_PORT=5433
DB_REPLICA1_MAX_CONNECTIONS=150
DB_REPLICA1_MIN_CONNECTIONS=20

# Replica 2 Configuration (Cross-Region - Frankfurt)
DB_REPLICA2_HOST=localhost
DB_REPLICA2_PORT=5434
DB_REPLICA2_MAX_CONNECTIONS=150
DB_REPLICA2_MIN_CONNECTIONS=20

# Replica 3 Configuration (Cross-Region - Ireland)
DB_REPLICA3_HOST=localhost
DB_REPLICA3_PORT=5435
DB_REPLICA3_MAX_CONNECTIONS=150
DB_REPLICA3_MIN_CONNECTIONS=20

# PgBouncer Configuration
PGBOUNCER_ENABLED=true
PGBOUNCER_HOST=localhost
PGBOUNCER_PORT=6432
PGBOUNCER_POOL_MODE=transaction
PGBOUNCER_MAX_CLIENT_CONN=1000
PGBOUNCER_DEFAULT_POOL_SIZE=25

# Redis Cache Configuration
REDIS_ENABLED=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Cache Configuration
CACHE_ENABLED=true
CACHE_TIMEOUT=300000
CACHE_MAX_SIZE=1000

# Health Check Configuration
DB_HEALTH_CHECK_INTERVAL=30000
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=5000

# Monitoring Configuration
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_DETAILED_LOGS=false

# Geographic Distribution (Future Ready)
# Primary Region
PRIMARY_REGION=eu-west-2
PRIMARY_ZONE=eu-west-2a

# Replica Regions
REPLICA1_REGION=eu-west-2
REPLICA1_ZONE=eu-west-2b
REPLICA2_REGION=eu-central-1
REPLICA2_ZONE=eu-central-1a
REPLICA3_REGION=eu-west-1
REPLICA3_ZONE=eu-west-1a

# Connection String (Backward Compatibility)
# This will be overridden by the enhanced system but kept for compatibility
DATABASE_URL=postgresql://postgres:your_password_here@localhost:5432/nw_london_local